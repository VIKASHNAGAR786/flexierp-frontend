<!-- Overlay (blurred background) -->
<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">

  <!-- Popup Box -->
  <div class="bg-slate-900 text-white p-8 rounded-2xl shadow-2xl w-[800px] max-h-[80vh] overflow-y-auto relative">

    <!-- Close Button -->
    <button class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl" (click)="closePopup()">
      ✕
    </button>

    <!-- Title -->
    <h2 class="text-2xl font-bold text-[#00ffee] mb-4">Old Customers</h2>

    <!-- 🔍 Search Bar -->
    <div class="mb-4">
      <input type="text"
             [(ngModel)]="searchTerm"
             placeholder="Search customers..."
             class="w-full px-4 py-2 rounded-lg bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-[#00ffee]"
             (input)="loadCustomers()" />
    </div>

    <!-- Loader -->
    <div *ngIf="isLoading" class="flex justify-center items-center py-8">
      <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-[#00ffee]"></div>
    </div>

    <!-- Customer Table -->
    <!-- Customer Table -->
<div *ngIf="!isLoading" class="overflow-x-auto max-h-[400px] border border-slate-700 rounded-lg">
  <table class="w-full table-fixed border-collapse text-white text-lg">
    <thead class="bg-slate-800 sticky top-0 z-10">
      <tr>
        <th class="w-1/4 p-4 border border-slate-700">Name</th>
        <th class="w-1/6 p-4 border border-slate-700">Mobile No</th>
        <th class="w-1/4 p-4 border border-slate-700">Email</th>
        <th class="w-1/3 p-4 border border-slate-700">Notes</th>
      </tr>
    </thead>
    <tbody class="overflow-y-auto">
      <tr *ngFor="let customer of getFilteredCustomers()" 
      class="hover:bg-slate-700 cursor-pointer"
      (click)="selectCustomer(customer)">
        <td class="p-4 border border-slate-700 truncate">{{ customer.customerName }}</td>
        <td class="p-4 border border-slate-700 truncate">{{ customer.phoneNo }}</td>
        <td class="p-4 border border-slate-700 truncate">{{ customer.email }}</td>
        <td class="p-4 border border-slate-700 truncate">{{ customer.remark }}</td>
      </tr>
    </tbody>
  </table>
</div>


  </div>
</div>
