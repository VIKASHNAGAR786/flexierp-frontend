  <div class="grid grid-cols-1 gap-6">
    <div class="bg-slate-800 p-6 rounded-xl shadow-lg space-y-4">

    <!-- for barcode scan  -->
    <app-scan-barcode (barcodeScanned)="fetchProductByBarcode($event)"></app-scan-barcode>


    <!-- <button type="button" [(ngModel)]="saleProduct.barcode" (click)="fetchProductByBarcode(saleProduct.barcode)"
    class="w-full md:w-auto bg-[#00ffee] text-black px-6 py-2 rounded font-bold hover:bg-white transition">
    Fetch Product
  </button> -->
</div>

    <!-- ðŸ”¹ Product Detail Section -->
    <div class="bg-slate-800 p-6 rounded-xl shadow-lg space-y-4">
      <h3 class="text-xl font-extrabold text-[#00ffee] mb-4 uppercase tracking-wide drop-shadow-md">
        Product Details
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

        <!-- Barcode -->
        <div class="flex flex-col">
          <label class="label-style">Barcode</label>
          <input type="text" [(ngModel)]="saleProduct.barCode" name="barCode"
            placeholder="Enter Barcode" class="input-style" readonly />
        </div>

        <!-- Product Code -->
        <div class="flex flex-col">
          <label class="label-style">Product Code</label>
          <input type="text" [(ngModel)]="saleProduct.productCode" name="productCode"
            placeholder="Enter Code" class="input-style" readonly/>
        </div>

        <!-- Product Name -->
        <div class="flex flex-col">
          <label class="label-style">Product Name</label>
          <input type="text" [(ngModel)]="saleProduct.productName" name="productName"
            placeholder="Enter Name" class="input-style" readonly/>
        </div>

        <!-- Category -->
        <div class="flex flex-col">
          <label class="label-style">Category</label>
          <input type="text" [(ngModel)]="saleProduct.categoryName" name="categoryName"
            placeholder="Category" class="input-style" readonly/>
        </div>

        <!-- Product Type -->
        <div class="flex flex-col">
          <label class="label-style">Product Type</label>
          <input type="text" [(ngModel)]="saleProduct.productType" name="productType"
            placeholder="Type" class="input-style" readonly/>
        </div>

        <!-- Packed Date -->
        <div class="flex flex-col">
          <label class="label-style">Packed Date</label>
          <input type="date" [(ngModel)]="saleProduct.packedDate" name="packedDate"
            class="input-style" readonly/>
        </div>

        <!-- Dimensions -->
        <div class="flex flex-col">
          <label class="label-style">Weight (g)</label>
          <input type="number" [(ngModel)]="saleProduct.packedWeight" name="packedWeight"
            placeholder="0" class="input-style" readonly/>
        </div>

        <div class="flex flex-col">
          <label class="label-style">Height (cm)</label>
          <input type="number" [(ngModel)]="saleProduct.packedHeight" name="packedHeight"
            placeholder="0" class="input-style" readonly/>
        </div>

        <div class="flex flex-col">
          <label class="label-style">Depth (cm)</label>
          <input type="number" [(ngModel)]="saleProduct.packedDepth" name="packedDepth"
            placeholder="0" class="input-style" readonly/>
        </div>

        <div class="flex flex-col">
          <label class="label-style">Width (cm)</label>
          <input type="number" [(ngModel)]="saleProduct.packedWidth" name="packedWidth"
            placeholder="0" class="input-style" readonly/>
        </div>

        <!-- Boolean Switches -->
        <div class="flex items-center gap-3">
          <input type="checkbox" [(ngModel)]="saleProduct.isPerishable" name="isPerishable"
            class="w-4 h-4" />
          <label class="text-white">Perishable</label>
        </div>

        <div class="flex items-center gap-3">
          <input type="checkbox" [(ngModel)]="saleProduct.status" name="status"
            class="w-4 h-4" disabled/>
          <label class="text-white">Active</label>
        </div>

      </div>

      <!-- ðŸ”¹ Financial / Pricing Section -->
      <h4 class="text-lg font-bold text-[#00ffee] mt-6">Pricing</h4>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="flex flex-col">
          <label class="label-style">Purchase Price</label>
          <input type="number" [(ngModel)]="saleProduct.purchasePrice" name="purchasePrice"
            placeholder="0.00" class="input-style" readonly/>
        </div>

        <div class="flex flex-col">
          <label class="label-style">Selling Price</label>
          <input type="number" [(ngModel)]="saleProduct.sellingPrice" name="sellingPrice"
            placeholder="0.00" class="input-style" readonly/>
        </div>

        <div class="flex flex-col">
          <label class="label-style">Tax Rate (%)</label>
          <input type="number" [(ngModel)]="saleProduct.taxRate" name="taxRate"
            placeholder="0.00" class="input-style" readonly/>
        </div>

        <div class="flex flex-col">
          <label class="label-style">Discount</label>
          <input type="number" [(ngModel)]="saleProduct.discount" name="discount"
            placeholder="0.00" class="input-style" readonly/>
        </div>
      </div>

      <!-- Save Product Button -->
      <button 
       type="button" (click)="addToCart()"
        class="w-full md:w-auto bg-[#00ffee] text-black px-6 py-2 rounded font-bold hover:bg-white transition">
        Add To Cart
      </button>
    </div>
  </div>


    <!-- Cart Section -->
    <div class="bg-slate-800 p-6 rounded-xl shadow-lg space-y-4">
        <h3 class="text-xl font-extrabold text-[#00ffee] mb-4 uppercase tracking-wide drop-shadow-md">
            Cart
        </h3>

        <div class="overflow-x-auto">
            <table class="w-full text-sm border-collapse">
                <thead>
                    <tr class="bg-slate-700 text-[#00ffee] uppercase text-xs">
                        <th class="px-3 py-2 text-left">Product</th>
                        <th class="px-3 py-2 text-center">Qty</th>
                        <th class="px-3 py-2 text-center">Price</th>
                        <th class="px-3 py-2 text-center">Discount</th>
                        <th class="px-3 py-2 text-center">Tax</th>
                        <th class="px-3 py-2 text-center">Total</th>
                        <th class="px-3 py-2 text-center">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of cart; let i = index" class="border-b border-slate-600">
                        <td class="px-3 py-2">{{ item.name }}</td>
                        <td class="px-3 py-2 text-center">{{ item.weight}}</td>
                        <td class="px-3 py-2 text-center">{{ item.sellingPrice | number:'1.2-2' }}</td>
                        <td class="px-3 py-2 text-center">{{ item.discountAmt }}</td>
                        <td class="px-3 py-2 text-center">{{ item.taxAmt }}%</td>
                        <td class="px-3 py-2 text-center font-semibold">{{ item.total | number:'1.2-2' }}</td>
                        <td class="px-3 py-2 text-center">
                            <button type="button" (click)="removeFromCart(i)" class="text-red-400 hover:text-red-600">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Summary -->
        <div class="flex flex-col md:flex-row justify-between items-center mt-4 text-lg font-bold">
            <span>Total Items: {{ cart.length }}</span>
            <span class="text-[#00ffee]">Grand Total: {{ grandTotal | number:'1.2-2' }}</span>
        </div>
    </div>
<!-- Customer & Payment Info -->
<div class="bg-slate-800 p-6 rounded-xl shadow-lg space-y-4">
  <div class="flex items-center justify-between mb-4">
  <h3 class="text-xl font-extrabold text-[#00ffee] uppercase tracking-wide drop-shadow-md">
    Customer & Payment
  </h3>

  <!-- ðŸ”˜ Sale to Old Customers Button -->
  <button 
  (click)="openOldCustomerSale()"
  class="bg-[#00ffee] text-slate-900 font-bold px-4 py-2 rounded-lg shadow-md hover:bg-[#00ccbb] transition">
  Sale to Old Customers
</button>
<!-- Conditional render -->
 @if(showOldCustomer){
<app-old-customer-popup 
  *ngIf="showOldCustomer" 
  (close)="showOldCustomer = false">
</app-old-customer-popup>
 }
 </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- Customer Name -->
    <div class="flex flex-col">
                <label
                    class="mb-2 text-sm md:text-base font-extrabold text-[#00ffee] uppercase tracking-wide drop-shadow-md">
                    Customer Name
                </label>
                <input type="text" [(ngModel)]="customer.customerName" name="customerName" placeholder="Enter Customer Name"
                    class="input-style" />
            </div>

            <!-- Customer Email -->
            <div class="flex flex-col">
                <label
                    class="mb-2 text-sm md:text-base font-extrabold text-[#00ffee] uppercase tracking-wide drop-shadow-md">
                    Email
                </label>
                <input type="email" [(ngModel)]="customer.email" name="email" placeholder="Enter Email"
                    class="input-style" />
            </div>

            <!-- Customer Phone -->
            <div class="flex flex-col">
                <label
                    class="mb-2 text-sm md:text-base font-extrabold text-[#00ffee] uppercase tracking-wide drop-shadow-md">
                    Phone
                </label>
                <input type="tel" [(ngModel)]="customer.phoneNo" name="phoneNo" placeholder="Enter Phone Number"
                    class="input-style" />
            </div>

            <!-- Customer Address -->
            <div class="flex flex-col">
                <label
                    class="mb-2 text-sm md:text-base font-extrabold text-[#00ffee] uppercase tracking-wide drop-shadow-md">
                    Address
                </label>
                <textarea [(ngModel)]="customer.customerAddress" name="customerAddress" rows="2" placeholder="Enter Address"
                    class="input-style resize-none"></textarea>
            </div>

            <!-- Payment Method -->
            <div class="flex flex-col">
                <label
                    class="mb-2 text-sm md:text-base font-extrabold text-[#00ffee] uppercase tracking-wide drop-shadow-md">
                    Payment Method
                </label>
                <select [(ngModel)]="customer.paymentMode" name="paymentMode"
                    class="w-full px-4 py-2 text-gray-900 dark:text-white bg-white dark:bg-slate-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200">
                    <option value="1">Cash</option>
                    <option value="2">UPI</option>
                    <option value="3">Card</option>
                </select>
            </div>

            <!-- Additional Notes -->
            <div class="flex flex-col md:col-span-2">
                <label
                    class="mb-2 text-sm md:text-base font-extrabold text-[#00ffee] uppercase tracking-wide drop-shadow-md">
                    Notes
                </label>
                <textarea [(ngModel)]="customer.customerNotes" name="customerNotes" rows="3" placeholder="Additional notes"
                    class="input-style resize-none"></textarea>
            </div>
        </div>
    </div>


    <!-- Action Buttons -->
    <div class="flex flex-col md:flex-row gap-4">
        <button type="submit" (click)="MakeTheSale()"
            class="w-full md:w-1/2 bg-[#00ffee] text-black px-6 py-3 rounded-lg font-bold hover:bg-white transition">
            Submit Sale
        </button>
        <button type="button" (click)="clearSale()"
            class="w-full md:w-1/2 bg-gray-500 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-600 transition">
            Clear Screen
        </button>
    </div>
