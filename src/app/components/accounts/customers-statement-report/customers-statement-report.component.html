<!-- 🔍 Search Bar + Actions -->
<div class="flex justify-between items-center mb-4 gap-2 flex-wrap">
  <!-- Search Input -->
  <input type="text" [(ngModel)]="filter.searchTerm" (ngModelChange)="getCustomerData()" 
    placeholder="Search customers..."
    class="px-4 py-2 rounded-lg bg-slate-800 text-white border border-slate-600 focus:outline-none focus:ring-2 focus:ring-[#00ffee] w-1/3" />

  <!-- 📑 Rows per page -->
  <select [(ngModel)]="filter.pageSize" (change)="getCustomerData()"
    class="px-3 py-2 rounded bg-slate-800 text-white border border-slate-600">
    <option *ngFor="let size of pageSizes" [value]="size">{{ size }} per page</option>
  </select>

  <!-- 📤 Export Buttons -->
  <div class="flex gap-2" *ngIf="customers.length > 0">
    <button (click)="exportToPdf()"
      class="flex items-center gap-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-white">
      <i class="fas fa-file-pdf"></i> PDF
    </button>
    <button (click)="exportToExcel()"
      class="flex items-center gap-1 px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-white">
      <i class="fas fa-file-excel"></i> Excel
    </button>
  </div>
</div>


<!-- 📋 Customer Table -->
<div #customerTable class="overflow-x-auto overflow-y-auto bg-slate-900 rounded-lg shadow-lg relative max-h-[500px]">
  <table class="min-w-full text-white border-collapse">
    <thead
      class="bg-gradient-to-r from-slate-900 to-slate-800 text-[#00ffee] uppercase text-sm md:text-base tracking-wide sticky top-0 z-50">
      <tr>
        <th class="px-4 py-2 border-b border-slate-700">Sr.No</th>
        <th class="px-4 py-2 border-b border-slate-700">Customer Name</th>
        <th class="px-4 py-2 border-b border-slate-700">Contact No.</th>
        <th class="px-4 py-2 border-b border-slate-700">Email</th>
        <th class="px-4 py-2 border-b border-slate-700">City</th>
        <th class="px-4 py-2 border-b border-slate-700">Opening Balance</th>
        <th class="px-4 py-2 border-b border-slate-700">Total Debit</th>
        <th class="px-4 py-2 border-b border-slate-700">Total Credit</th>
        <th class="px-4 py-2 border-b border-slate-700">Outstanding Balance</th>
        <th class="px-4 py-2 border-b border-slate-700">Status</th>
        <th class="px-4 py-2 border-b border-slate-700">Last Transaction</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-slate-700">
      <tr *ngFor="let customer of customers; let i = index" class="hover:bg-slate-700 transition cursor-pointer"
          (click)="viewCustomerStatement(customer.customerId)">
        <td class="px-4 py-2 text-center">{{ (filter.pageNo - 1) * filter.pageSize + i + 1 }}</td>
        <td class="px-4 py-2 font-semibold">{{ customer.customerName }}</td>
        <td class="px-4 py-2 text-center">{{ customer.phone }}</td>
        <td class="px-4 py-2">{{ customer.email }}</td>
        <td class="px-4 py-2">{{ customer.city }}</td>
        <td class="px-4 py-2 text-center">{{ customer.openingBalance | currency:'INR':'symbol':'1.2-2' }}</td>
        <td class="px-4 py-2 text-center">{{ customer.totalDebit | currency:'INR':'symbol':'1.2-2' }}</td>
        <td class="px-4 py-2 text-center">{{ customer.totalCredit | currency:'INR':'symbol':'1.2-2' }}</td>
        <td class="px-4 py-2 text-center font-bold">
          {{ customer.outstandingBalance | currency:'INR':'symbol':'1.2-2' }}
        </td>
        <td class="px-4 py-2">
          <span *ngIf="customer.isActive" class="text-green-400 font-semibold">Active</span>
          <span *ngIf="!customer.isActive" class="text-gray-400">Inactive</span>
        </td>
        <td class="px-4 py-2 text-center">{{ customer.lastTransactionDate | date:'dd-MMM-yyyy' }}</td>
      </tr>

      <!-- Empty State -->
      <tr *ngIf="customers.length === 0">
        <td colspan="11" class="text-center py-4 text-gray-400">No customers found.</td>
      </tr>
    </tbody>
  </table>
</div>

<!-- 📄 Pagination Controls -->
<div class="flex justify-between items-center mt-4 text-white">
  <button (click)="prevPage()" [disabled]="filter.pageNo === 1"
    class="px-3 py-1 bg-slate-800 rounded disabled:opacity-50">Previous</button>
  <span>Page {{ filter.pageNo }} </span>
  <button (click)="nextPage()"
    class="px-3 py-1 bg-slate-800 rounded disabled:opacity-50">Next</button>
</div>
