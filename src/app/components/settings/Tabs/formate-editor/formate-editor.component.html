<div class="p-6 space-y-6">

  <!-- Header -->
  <div class="flex flex-wrap items-center justify-between gap-4 border-b pb-3">
    <h2 class="text-2xl font-bold text-gray-800">Template Editor</h2>

    <div class="flex items-center gap-4">
      <!-- Dropdown -->
      <select
        [(ngModel)]="selectedTemplateKey"
        class="px-3 py-2 border rounded-lg text-gray-700 bg-white shadow"
      >
        <option
          *ngFor="let template of alltemplates"
          [value]="template.key!"
          [attr.selectedid]="template.id"
        >
          {{ template.name | titlecase }}
        </option>
      </select>

      <!-- Save Button -->
      <button
        (click)="saveTemplate()"
        class="px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow transition"
      >
        Save Template
      </button>
    </div>
  </div>

  <!-- Main Grid -->
  <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">

    <!-- Sidebar -->
    <div class="lg:col-span-1 border rounded-xl p-4 shadow bg-[var(--card)] h-[550px] flex flex-col">
      <h3 class="font-semibold mb-3 text-gray-700">
        {{ selectedTemplateKey | titlecase }}
      </h3>

      <!-- Search -->
      <input
        type="text"
        [(ngModel)]="addonSearch"
        placeholder="Search addons..."
        class="mb-3 px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />

      <!-- Addon List -->
      <div class="overflow-y-auto flex-1">
        <ul class="space-y-2 text-sm text-gray-700">
          <li
            *ngFor="let field of (selectedTemplate | keyvalue) | filterBySearch:addonSearch"
            (click)="insertField(field.value)"
            class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gray-100 cursor-pointer transition"
          >
            <span class="font-medium">{{ field.key }}</span>
            <i class="bi bi-plus-circle text-blue-600 hover:text-blue-800"></i>
          </li>
        </ul>
      </div>
    </div>

    <!-- Editor -->
    <div class="lg:col-span-3">
      <div class="p-6 border rounded-xl shadow bg-white flex flex-col items-center">
        <div
          class="border rounded overflow-auto"
          style="width:1000px; height:1414px;"
        >
          <editor
            [(ngModel)]="templateContent"
            [init]="editorInit"
            [licenseKey]="licenseKey"
            class="w-full h-full"
          ></editor>
        </div>

        <div class="mt-4 w-full flex justify-end">
          <button
            (click)="saveTemplate()"
            class="px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow transition"
          >
            Save Template
          </button>
        </div>
      </div>
    </div>

  </div>
</div>