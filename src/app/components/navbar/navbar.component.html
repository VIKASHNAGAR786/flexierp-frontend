<!-- Toggle Button (visible only on small screens) -->
<button
  class="btn btn-outline-secondary d-md-none position-fixed top-0 start-0 m-3"
  style="z-index: 1100; color: var(--sidebar-text); border-color: var(--sidebar-border);"
  (click)="toggleSidebar()"
>
  <i class="bi bi-list fs-4"></i>
</button>

<!-- Sidebar -->
<div
  [class.translate-x-0]="sidebarVisible"
  [class.-translate-x-full]="!sidebarVisible"
  class="fixed top-0 left-0 h-full w-64 shadow-2xl z-50 flex flex-col justify-between transform transition-transform duration-300 ease-in-out md:translate-x-0"
  [ngStyle]="{
    'background': 'linear-gradient(to bottom, var(--sidebar-bg-start), var(--sidebar-bg-end))',
    'color': 'var(--sidebar-text)'
  }"
>

  <!-- Logo -->
  <div
    class="flex items-center justify-center h-20 px-4"
    [style.borderBottom]="'1px solid ' + 'var(--sidebar-border)'"
  >
    <img src="flexi-logo.png" class="h-12 w-12 mr-2 rounded-full shadow-md" />
    <span class="text-2xl font-bold tracking-wide" style="color: var(--sidebar-hover-bg)">
      FlexiERP
    </span>
  </div>

  <!-- Menu -->
  <nav class="flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar">

    <ng-container *ngFor="let item of coreLinks">
      <a
  [routerLink]="item.path"
  routerLinkActive="active-sidebar-link"
  class="sidebar-link flex items-center gap-3 py-2 px-4 rounded-lg transition"
  style="color: var(--sidebar-text)"
  [style.--hover-bg]="'var(--sidebar-hover-bg)'"
  [style.--hover-text]="'var(--sidebar-hover-text)'"
>

        <i [class]="item.icon + ' text-xl'"></i> {{ item.label }}
      </a>
    </ng-container>

    <!-- Coming Soon -->
    <div
      class="mt-6 pt-4 uppercase text-sm"
      [style.color]="'var(--sidebar-section-title)'"
      [style.borderTop]="'1px solid var(--sidebar-border)'"
    >
      Coming Soon
    </div>

    <ng-container *ngFor="let item of futureLinks">
      <a
        class="flex items-center gap-3 py-2 px-4 rounded-lg transition cursor-not-allowed"
        [style.color]="'var(--sidebar-disabled)'"
        style="opacity: 0.6;"
      >
        <i [class]="item.icon + ' text-xl'"></i>
        {{ item.label }}

        <span class="ml-auto px-2 py-0.5 rounded-full text-xs" [ngClass]="item.badgeClass">
          {{ item.badge }}
        </span>

      </a>
    </ng-container>
  </nav>

  <!-- Footer -->
  <div class="px-4 py-4" [style.borderTop]="'1px solid var(--sidebar-border)'">

    <ng-container *ngIf="!isLoggedIn; else loggedSidebar">

      <a
        routerLink="/auth/login"
        class="block w-full text-center py-2 rounded-full transition"
        [ngStyle]="{
          'border': '1px solid var(--sidebar-hover-bg)',
          'color': 'var(--sidebar-hover-bg)'
        }"
        (mouseover)="applyHover($event)"
        (mouseout)="removeHover($event)"
      >
        <i class="bi bi-box-arrow-in-right mr-2"></i> Login
      </a>

      <a
        routerLink="/auth/signup"
        class="mt-2 block w-full text-center py-2 text-white rounded-full transition"
        [style.background]="'var(--sidebar-hover-bg)'"
      >
        <i class="bi bi-person-plus mr-2"></i> Sign Up
      </a>

    </ng-container>

    <ng-template #loggedSidebar>
      <button
        (click)="logout()"
        class="mt-2 w-full text-center py-2 rounded-full transition"
        [ngStyle]="{
          'border': '1px solid var(--sidebar-hover-bg)',
          'color': 'var(--sidebar-hover-bg)'
        }"
      >
        <i class="bi bi-box-arrow-right mr-2"></i> Logout
      </button>
    </ng-template>

  </div>

</div>
