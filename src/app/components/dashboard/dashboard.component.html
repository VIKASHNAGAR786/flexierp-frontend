<!-- dashboard.component.html -->
<div class="min-h-screen bg-gray-900 text-white font-sans p-6">
  <!-- Header -->
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-cyan-400">Finance Dashboard</h1>
    <p class="text-gray-400">Overview of your cash & cheque transactions</p>
  </div>

  <!-- Filters -->
  <div class="flex flex-wrap gap-4 mb-6">
    <div>
      <label class="block mb-1 text-gray-300">Date Range</label>
      <select class="bg-gray-800 border border-cyan-500 rounded px-3 py-2 text-white" [(ngModel)]="selectedRange"
        (change)="onDateRangeChange()">
        <option value="7">Last 7 Days</option>
        <option value="30">Last Month</option>
        <option value="365">Last Year</option>
      </select>
    </div>

    <button (click)="exportToPdf()" class="bg-cyan-500 hover:bg-cyan-400 px-4 py-2 rounded font-semibold">Export
      PDF</button>
    <button (click)="exportToExcel()" class="bg-purple-500 hover:bg-purple-400 px-4 py-2 rounded font-semibold">Export
      Excel</button>
  </div>

  <!-- Metrics Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
    <div class="bg-gray-800 border border-cyan-500 rounded-xl p-4 shadow-lg hover:shadow-cyan-500/50 transition">
      <p class="text-gray-400 uppercase text-sm">Total Cash Received</p>
      <h2 class="text-2xl font-bold text-cyan-400">â‚¹ {{dashboarddata.totalCashReceived}}</h2>

      <!-- Conditional color based on value -->
      <p [ngClass]="dashboarddata.cashGrowthPercent < 0 ? 'text-red-400' : 'text-green-400'" class="text-sm mt-1">â‚¹
        {{dashboarddata.cashGrowthPercent}} From Last Month
      </p>
    </div>


    <div class="bg-gray-800 border border-purple-500 rounded-xl p-4 shadow-lg hover:shadow-purple-500/50 transition">
      <p class="text-gray-400 uppercase text-sm">Total Cheque Received</p>
      <h2 class="text-2xl font-bold text-purple-400">â‚¹ {{dashboarddata.totalChequeReceived}}</h2>
      <p [ngClass]="dashboarddata.chequeGrowthPercent < 0 ? 'text-red-400' : 'text-green-400'" class="text-sm mt-1">â‚¹
        {{dashboarddata.chequeGrowthPercent}} From Last Month
      </p>
    </div>

    <div class="bg-gray-800 border border-yellow-500 rounded-xl p-4 shadow-lg hover:shadow-yellow-500/50 transition">
      <p class="text-gray-400 uppercase text-sm">Total Balance Due</p>
      <h2 class="text-2xl font-bold text-yellow-400">â‚¹ {{dashboarddata.totalBalanceDue}}</h2>
    </div>

    <div class="bg-gray-800 border border-pink-500 rounded-xl p-4 shadow-lg hover:shadow-pink-500/50 transition">
      <p class="text-gray-400 uppercase text-sm">Trends & Growth</p>
      <h2 class="text-2xl font-bold text-pink-400">ðŸ“ˆ Increasing</h2>
    </div>

  </div>

  <!-- Dummy Table -->
  <div class="mt-8 bg-gray-800 rounded-xl p-4 border border-cyan-500 shadow-lg">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-semibold text-cyan-400">
        Recent Transactions
        <span class="text-sm text-gray-400 ml-2">(Last 50 Records)</span>
      </h3>
    </div>
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="text-gray-300 border-b border-gray-700">
          <th class="py-2 px-4">Date</th>
          <th class="py-2 px-4">Customer</th>
          <th class="py-2 px-4">Received Amount</th>
          <th class="py-2 px-4">Balance Due</th>
          <th class="py-2 px-4">Total Amount</th>
          <th class="py-2 px-4">Payment Type</th>
          <th class="py-2 px-4">Transaction Type</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let transaction of dashboarddata.recenttransaction"
          class="border-b border-gray-700 hover:bg-gray-700/50 transition">
          <td class="py-2 px-4">{{ transaction.date }}</td>
          <td class="py-2 px-4">{{ transaction.customerName }}</td>
          <td class="py-2 px-4">â‚¹ {{ transaction.receivedAmount | number:'1.0-2' }}</td>
          <td class="py-2 px-4">â‚¹ {{ transaction.balanceDue | number:'1.0-2' }}</td>
          <td class="py-2 px-4">â‚¹ {{ transaction.totalAmount | number:'1.0-2' }}</td>
         <td 
  [ngClass]="{
    'text-green-500 font-bold border-l-4 border-green-500': transaction.paymentType === 'Cash',
    'text-blue-500 font-bold border-l-4 border-blue-500': transaction.paymentType === 'Cheque'
  }"
  class="py-2 px-4">
  {{ transaction.paymentType }}
</td>

          <td class="py-2 px-4">{{ transaction.transactionType }}</td>
        </tr>
      </tbody>
    </table>

  </div>
</div>

<!-- loader -->

<!-- for the big loader -->
<div *ngIf="reportIsLoading" class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm">
  <div class="text-center space-y-4">

    <!-- Animated FLEXIERP text -->
    <h1 class="text-5xl font-extrabold text-[#00ffee] animate-bounce">FLEXIERP</h1>

    <!-- Bouncing dots -->
    <div class="flex justify-center space-x-2">
      <span class="w-4 h-4 bg-[#00ffee] rounded-full animate-bounce delay-100"></span>
      <span class="w-4 h-4 bg-[#00ffee] rounded-full animate-bounce delay-200"></span>
      <span class="w-4 h-4 bg-[#00ffee] rounded-full animate-bounce delay-300"></span>
    </div>

    <p class="text-white text-lg font-semibold animate-pulse">Loading report, please wait...</p>
  </div>
</div>